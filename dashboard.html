<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    h1 { text-align: center; }
    .topbar { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
    button { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; background: #4CAF50; color: white; }
    button:hover { background: #45a049; }
    table { width: 100%; border-collapse: collapse; background: white; }
    th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
    th { background: #4CAF50; color: white; }
    #searchBar { width: 300px; padding: 8px; margin-bottom: 15px; }
  </style>
</head>
<body>

<h1>Admin Dashboard</h1>

<div class="topbar">
  <button onclick="alert('Register student clicked')">Register Student</button>
  <button onclick="alert('Search student clicked')">Search Student</button>
  <button onclick="logout()">Logout</button>
</div>

<input type="text" id="searchBar" placeholder="Search by name, phone or class..." onkeyup="filterTable()" />

<table id="dataTable">
  <thead>
    <tr>
      <th>Date</th>
      <th>Name</th>
      <th>Phone</th>
      <th>Class</th>
      <th>Salvation</th>
      <th>Temptation</th>
      <th>Prayers</th>
      <th>Bible</th>
      <th>Fellowship</th>
      <th>Witnessing</th>
      <th>Baptism</th>
      <th>Holy Spirit</th>
      <th>Giving</th>
      <th>Deliverance</th>
      <th>Evangelism</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxlozKnBF27UcbL_76dMfsGm_y_0JLASU3WxNAM2BIOD3QNTd2rH4PVJ8UdinTjoK7QWA/exec";

// Redirect to login if not logged in
if (!sessionStorage.getItem("loggedIn")) {
  window.location.href = "login.html";
}

function logout() {
  sessionStorage.removeItem("loggedIn");
  window.location.href = "login.html";
}

// Fetch data from Google Sheets
function loadData() {
  fetch(`${SCRIPT_URL}?view=all`)
    .then(res => res.json())
    .then(data => {
      const tbody = document.querySelector("#dataTable tbody");
      tbody.innerHTML = "";
      data.forEach(row => {
        const tr = document.createElement('tr');
        row.forEach(cell => {
          const td = document.createElement('td');
          td.textContent = cell;
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });
    })
    .catch(err => console.error("Error loading data:", err));
}

// Filter table rows
function filterTable() {
  const input = document.getElementById("searchBar").value.toLowerCase();
  document.querySelectorAll("#dataTable tbody tr").forEach(r => {
    r.style.display = r.textContent.toLowerCase().includes(input) ? "" : "none";
  });
}

// Load data on page load
window.onload = loadData;
</script>

</body>
</html>


      




   
